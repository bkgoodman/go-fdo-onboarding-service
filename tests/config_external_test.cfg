# SPDX-FileCopyrightText: (C) 2026 Dell Technologies
# SPDX-License-Identifier: Apache 2.0
# Author: Brad Goodman

# Manufacturing station configuration for external HSM voucher signing test

debug: false

# Server settings
server:
  addr: "localhost:8080"
  ext_addr: "localhost:8080"
  use_tls: false
  insecure_tls: false

# Database settings
database:
  path: "manufacturing.db"
  password: ""

# Manufacturing settings
manufacturing:
  device_ca_key_type: "ec384"
  owner_key_type: "ec384"
  generate_certificates: true
  first_time_init: false

# Voucher Management Configuration
voucher_management:
  persist_to_db: false
  
  # New voucher signing configuration
  voucher_signing:
    mode: "external"
    owner_key_type: "ec384"
    first_time_init: false
    external_command: "python3 /home/windsurf/go-fdo-di/example_hsm_handler.py {requestfile} {serialno} {model} {station} {requestid}"
    external_timeout: "30s"
  
  # Legacy owner signover (deprecated)
  owner_signover:
    enabled: false
    external_command: ""
    timeout: "10s"
  
  voucher_upload:
    enabled: true
    external_command: "echo 'Voucher uploaded with external signing: serial={serialno} model={model} guid={guid} voucherfile={voucherfile}'"
    timeout: "30s"
